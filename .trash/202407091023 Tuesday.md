---
date:
  - 09/07/2024 10:23
tags:
  - Daily/Log
cssclasses:
  - daily
  - image-borders
  - log
  - Tuesday
---
# DAILY NOTE
## Tuesday, July 9th, 2024
---
### Journal
#### 10:23
Tasks for today:
- [ ] Встреча с заказчиками ОЖИВИ
	- [ ] Подготовить вопросы
- [ ] Созвон #vvdev/sledge ==11:30==

**

АУДИТ ОЖИВИ

## Вопросы

1. Какие цели аудита преследуются и какие результаты ожидаются?  
    В зависимости от целей будут рассматриваться конкретные моменты по архитектуре, стеку и т.д.
    
2. Какие ожидаемые сроки проведения аудита?
    

Архитектура проекта

3. Насколько актуальна представленная схема архитектуры? Все ли компоненты были отображены?
    
4. Используются ли какие-либо внешние системы или API?
    
5. Какие имеются данные по текущей нагрузке на систему?
    

1. Пользовательская активность
    

1. Количество активных пользователей (DAU, WAU, MAU)
    
2. Пиковое количество одновременных пользователей
    
3. Распределение пользователей по географическим регионам (требуется для пониманию необходимости размещения удаленных серверов)
    

3. Запросы к серверу
    

1. Общее количество запросов к серверу (PRS)
    
2. Пиковое количество запросов в секунду
    
3. Среднее время ответа сервера
    

5. Использование БД и файловых хранилищ (среднее, пиковое, скорость роста)
    
6. Сетевой трафик (потребуется, если потребуется проводить аудит биллинга в целях уменьшения затрат на инфру)
    

1. Объем входящего и исходящего трафика
    
2. Пиковые значения трафика
    
3. Латентность сети
    

8. Серверные ресурсы
    

1. CPU
    
2. RAM
    
3. Дисковое пространство
    
4. I/O операции
    

7. Какие факторы повлияли на решение использовать несколько облачных и хостинг-провайдеров? Есть ли конкретные преимущества или требования, обусловившие это решение?
    
8. Как обеспечивается безопасность и согласованность данных между различными облачными платформами?
    
9. Как организовано резервное копирование данных между разными провайдерами?
    
10. Существуют ли планы по миграции или консолидации сервисов на одной платформе?
    
11. Существует ли план обеспечения отказоустойчивости?
    

  

Технический стек

11. Почему для личного кабинета клиента используется PHP 7.2 и Yii 2, а не более современные версии? Есть ли планы по обновлению?
    
12. Какие причины стоят за выбором Vue2 для фронтенда? Рассматривается ли переход на Vue3?
    
13. Почему для личного кабинета используется MariaDB, а для сервера-обработчика - MySQL? Какие преимущества дает такое разделение?
    
14. Как обеспечивается совместимость и синхронизация данных между MariaDB и MySQL?
    
15. Почему для сервера-обработчика выбран PHP 8.2.4 и Laravel 10? Какие преимущества это дает по сравнению со стеком личного кабинета?
    
16. Как организовано взаимодействие между личным кабинетом и сервером-обработчиком через REST API?
    
17. Какие меры безопасности применяются для защиты API?
    
18. Как организовано масштабирование базы данных при росте нагрузки?
    
19. Как реализовано кэширование на уровне базы данных и приложения?
    
20. Почему выбран ffmpeg версии 4.4.2 для обработки видео? Есть ли специфические требования к обработке видео в проекте?
    
21. Как организовано тестирование кода на разных уровнях (unit, integration, e2e) для обоих компонентов системы?
    
22. Какие инструменты используются для непрерывной интеграции и развертывания (CI/CD)?
    
23. Как решаются вопросы совместимости при использовании разных версий PHP и фреймворков в разных частях системы?
    
24. Есть ли планы по унификации технологического стека между личным кабинетом и сервером-обработчиком?
    
25. Какие текущие практики применяются для документирования архитектуры и API? Почему не используется автоматическая генерация документации?
    

Тех. Проблемы

26. Имеются ли текущие проблемы и ограничения с производительностью или работой компонентов прослеживаются на данный момент, которые не указаны в документе?
    
27. Какая именно информация отсутствует в базе знаний? Как это влияет на работу команды и проекта в целом?
    
28. Есть ли план по внедрению процессов QA? Какие виды тестирования наиболее критичны для проекта на данный момент?
    
29. Как отсутствие DevOps специалиста влияет на процессы развертывания и поддержки проекта? Какие конкретные проблемы это вызывает?
    
30. Каким образом отсутствие системного аналитика сказывается на проектировании и развитии системы?
    
31. Какие конкретно проблемы с чистотой данных наблюдаются в БД? Как это влияет на работу системы?
    
32. С какими конкретными методами связаны вопросы по логике работы? Насколько критичны эти проблемы для функционирования системы?
    
33. Какие конкретно проблемы вызывает монолитность личного кабинета для создания заказов? Есть ли планы по его рефакторингу или переработке?
    
34. Как команда справляется с отсутствием ключевых специалистов (QA, DevOps, системный аналитик)? Кто выполняет эти функции сейчас?
    
35. Есть ли план по улучшению качества данных в БД? Какие шаги планируется предпринять?
    
36. Какие наиболее критичные проблемы из перечисленных необходимо решить в первую очередь? Почему?
    
37. Есть ли проблемы с производительностью или масштабируемостью из-за монолитности личного кабинета? (сможем узнать после анализа метрик)
    
38. Как планируется решать вопросы с логикой работы методов? Есть ли документация по текущей логике?
    
39. Какие риски для проекта создают перечисленные проблемы? Как они оцениваются?
    

# Архитектура системы

## Общая архитектура

На проекте выбрана монолитная модель архитектуры. Опираясь на размеры проекта и на количество разрабатываемых сервисов, выбор вполне логичен. Далее [по диаграмме](https://miro.com/app/board/uXjVMzHdyHM=/?share_link_id=102558263615&roistat_visit=2377972):

Проведем аудиторскую оценку представленной архитектуры:

1. Распределение ресурсов:  
    Архитектура использует несколько облачных провайдеров (AWS, Yandex Cloud) и хостинг-провайдеров (SpaceWeb, Hetzner). Это может обеспечить отказоустойчивость, но также усложняет управление и может увеличить затраты.
    
2. Безопасность:
    

1. Отсутствует явное упоминание о мерах безопасности, шифровании данных или системах аутентификации.
    
2. Прямое API-взаимодействие между различными сервисами и клиентскими приложениями может создавать уязвимости.
    

4. Масштабируемость:  
    Использование облачных сервисов (AWS, Yandex Cloud) предполагает возможность масштабирования, но детали не указаны.
    
5. Отказоустойчивость:  
    Распределение между несколькими провайдерами может повысить отказоустойчивость, но нет информации о конкретных механизмах обеспечения непрерывности работы.
    
6. Соответствие требованиям:  
    Использование датацентров в разных странах может вызвать вопросы соответствия законодательству о хранении и обработке данных (например, GDPR).
    
7. Мониторинг и отладка:  
    Наличие Debug API, но нет информации о комплексном мониторинге системы.
    
8. ФАрхитектурные решения:
    

1. Разделение функциональности между серверами логично (например, хранение файлов, обработка видео).
    
2. Использование специализированных сервисов (например, ffmpeg для обработки видео) - хорошая практика.
    

10. Документация:  
    Схема предоставляет общее представление, но для полноценного аудита требуется более детальная документация.
    

### Рекомендации

1. Усиление мер безопасности:
    

1. Внедрить единую систему аутентификации и авторизации (например, OAuth 2.0 или JWT) для всех API-взаимодействий.
    
2. Использовать HTTPS для всех соединений.
    
3. Внедрить Web Application Firewall (WAF) для защиты от распространенных веб-атак.
    
4. Реализовать систему управления секретами (например, HashiCorp Vault) для безопасного хранения ключей и паролей.
    

3. Стратегия резервного копирования и аварийного восстановления:
    

1. Настроить регулярное резервное копирование данных между разными облачными провайдерами.
    
2. Разработать и протестировать план аварийного восстановления (DR plan).
    
3. Использовать решения для репликации данных в реальном времени (например, AWS DMS или Yandex Data Transfer).
    
4. Внедрить систему мониторинга целостности резервных копий.
    

5. Комплексная система мониторинга и логирования:
    

1. Внедрить централизованную систему сбора логов (например, ELK/PGL stack).
    
2. Использовать инструменты мониторинга производительности приложений (Prometheus).
    
3. Настроить оповещения о критических событиях и аномалиях.
    

7. Оценка необходимости использования разных провайдеров:
    

1. Провести анализ затрат и выгод для каждого используемого провайдера.
    
2. Рассмотреть возможность консолидации сервисов в рамках меньшего числа провайдеров.
    
3. Использовать инструменты управления мультиоблачной инфраструктурой (например, Terraform) для упрощения администрирования.
    
4. Разработать стратегию миграции для оптимизации распределения ресурсов.
    

9. Детализация документации:
    

1. Создать подробную схему архитектуры с описанием всех компонентов и их взаимодействий.
    
2. Разработать документацию по API для каждого сервиса.
    
3. Создать руководство по развертыванию и эксплуатации системы.
    
4. Внедрить систему автоматической генерации документации из кода (например, Swagger для API).
    
5. Регулярно обновлять документацию и проводить ее ревизию.
    

## Технологический стек

### Бэкенд

- PHP 7.2 (личный кабинет) и PHP 8.2.4 (сервер-обработчик):  
    Плюсы: PHP широко распространен и имеет обширную экосистему.  
    Минусы: Версия 7.2 устарела (поддержка прекращена). Рекомендуется обновить до PHP 8.x для обоих компонентов.
    
- Фреймворки Yii 2 и Laravel 10:  
    Хороший выбор современных фреймворков. Laravel 10 особенно подходит для быстрой разработки API.
    

### Фронтенд

- HTML5, CSS, JavaScript, Vue2:  
    Современный стек, но Vue2 уже не является последней версией. Рекомендуется обновление до Vue3 для улучшенной производительности и новых функций.
    
- База данных:
    

- MySQL/MariaDB:  
    Надежный выбор, но версии различаются между компонентами. Рекомендуется унификация и обновление до последних стабильных версий.
    

- API:
    

- REST API:  
    Стандартный подход, хорошо подходит для web-приложений. Для real-time функциональности дополненной реальности может понадобиться WebSocket.
    

- Обработка видео:
    

- ffmpeg 4.4.2:  
    Отличный выбор для обработки видео, актуальная версия.
    

### Рекомендации

1. Обновить PHP до последней стабильной версии (8.x) для всех компонентов.
    
2. Унифицировать версии баз данных, предпочтительно до последней стабильной версии MySQL или MariaDB.
    
3. Обновить Vue.js до версии 3 для улучшения производительности фронтенда.
    
4. Рассмотреть внедрение WebSocket для real-time взаимодействия в дополненной реальности.
    
5. Добавить систему кэширования (например, Redis) для улучшения производительности.
    
6. Внедрить систему контейнеризации (Docker) для упрощения развертывания и масштабирования.
    
7. Обеспечить безопасность API, используя современные методы аутентификации и авторизации.
    
8. Разработать стратегию масштабирования для обработки потенциально высокой нагрузки при работе с AR.
    

**